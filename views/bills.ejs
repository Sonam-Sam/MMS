<%- include('partials/aheader') -%>
<!-- For Page Loader -->
<div id="preloader"></div>

<body id="page-top">
  <div id="wrapper">
    <%- include('partials/sidebar') -%>
    <div class="d-flex flex-column" id="content-wrapper">
      <div id="content">
        <nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top">
          <%- include('partials/profiledrop') -%>
        </nav>
        <div class="container-fluid" style="margin-bottom: 40px">
          <!-- Bills -->
          <div class="d-sm-flex justify-content-between align-items-center mb-4">
            <h3
              class="text-dark mb-4"
              style="
                font-family: Roboto, sans-serif;
                margin-left: 22px;
                margin-top: 20px;
                font-weight: bold;
              "
            >
              List of BILLS
            </h3>
            <input
              type="button"
              class="btn btn-primary mb-2"
              value="Add Bill"
              data-toggle="modal"
              data-target="#alert"
              style="
                background-color: #32b9ff;
                border: none;
                width: 130px;
                display: inline-block;
                justify-content: center;
                margin-right: 25px;
                border-radius: 8px;
                font-family: Roboto, sans-serif;
              "
            />
            <!-- <input type="button" class="btn btn-primary mb-2" data-toggle="modal" data-target="#alert" style="background-color: #32B9FF; border: none; width: 130px; display: inline-block; justify-content: center; margin-right: 25px; border-radius: 8px;font-family: Roboto, sans-serif;" value='<i class="fas fa-plus"></i> Add Bill'> -->
            <!-- Modal -->
            <div
              class="modal fade"
              id="alert"
              tabindex="-1"
              aria-labelledby="add Stipend modal"
              aria-hidden="true"
            >
              <div class="modal-dialog d-flex justify-content-center">
                <div class="modal-content w-75" style="border-radius: 15px">
                  <div class="modal-header">
                    <img
                      src="\img\Mess.png"
                      style="
                        width: 90px;
                        height: 80px;
                        margin-left: 120px;
                        margin-top: 20px;
                      "
                    />
                    <button
                      type="button"
                      class="close"
                      data-dismiss="modal"
                      aria-label="Close"
                    >
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <%- include('add_bills') -%>
                </div>
              </div>
            </div>
            <!-- Modal -->
          </div>
          <div class="container-fluid">
            <div class="card shadow">
              <div class="card-body">
                <div class="table-responsive table mt-2" id="dataTable" role="grid" aria-describedby="dataTable_info">
                  <%- include('partials/messages') -%> 
                  <% if(bills != '') { %>
                  <table class="table dataTable my-0" id="dataTable">
                    <thead>
                      <tr>
                        <th>Month & Year</th>
                        <th>Item Name</th>
                        <th>Description</th>
                        <th>Image</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% bills.forEach((row, index) => { %>
                      <tr>
                        <td><%= row.month %>, <%= row.year %></td>
                        <td><%= row.title %></td>
                        <td><%= row.description %></td>

                        <td>
                          <a href="#"
                            ><img
                              src="<%= row.image %>"
                              width="50"
                              class="img-thumbnail"
                              data-toggle="modal"
                              data-target="#exampleModal<%= index %>"
                          /></a>
                          <!-- Modal -->
                          <div
                            class="modal fade"
                            id="exampleModal<%= index %>"
                            tabindex="-1"
                            role="dialog"
                            aria-labelledby="exampleModalLabel"
                            aria-hidden="true"
                          >
                            <div class="modal-dialog" role="document">
                              <div
                                class="modal-content"
                                style="margin-top: 90px; margin-left: 20px"
                              >
                                <!-- Add image inside the body of modal -->
                                <div class="modal-body">
                                  <!-- <img id="image" src="deth_cer.jpg" alt="Click on button" style="width: 470px; height: 2050%; justify-content: center;"/> -->
                                  <img
                                    src="<%= row.image %>"
                                    alt="Click on button"
                                    style="
                                      width: 470px;
                                      height: 2050%;
                                      justify-content: center;
                                    "
                                    data-mdb-img="https://mdbcdn.b-cdn.net/img/Photos/Slides/3.webp"
                                    class="w-100"
                                  />
                                </div>
                                <div
                                  class="modal-footer"
                                  style="justify-content: center"
                                >
                                  <button
                                    type="button"
                                    class="btn btn-primary"
                                    data-dismiss="modal"
                                    style="
                                      background-color: #32b9ff;
                                      width: 80px;
                                      border: none;
                                    "
                                  >
                                    Close
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- End Modal -->
                        </td>
                        <td>
                          <a
                            href="/edit/<%= row._id %>"
                            class="btn btn-info btn-sm"
                            style="
                              width: 24px;
                              height: 24px;
                              font-size: 11px;
                              padding-right: 18px;
                            "
                            ><i class="fas fa-edit" style="font-size: 12px"></i
                          ></a>

                          <a
                            href="#"
                            class="btn btn-danger btn-sm"
                            data-toggle="modal"
                            data-target="#deletebills<%= index %>"
                            style="
                              width: 24px;
                              height: 24px;
                              font-size: 11px;
                              padding-right: 17px;
                              padding-top: 6px;
                            "
                            ><i class="fas fa-trash-alt"></i
                          ></a>

                          <div
                            class="modal fade"
                            id="deletebills<%= index %>"
                            tabindex="-1"
                            role="dialog"
                            aria-labelledby="exampleModalLabel"
                            aria-hidden="true"
                          >
                            <div class="modal-dialog" role="document">
                              <div
                                class="modal-content"
                                style="border-radius: 15px; margin-top: 190px"
                              >
                                <div class="modal-header">
                                  <i
                                    class="fas fa-trash-alt"
                                    style="
                                      color: #000000;
                                      font-size: 60px;
                                      margin-left: 205px;
                                      margin-top: 20px;
                                    "
                                  ></i>
                                  <button
                                    type="button"
                                    class="close"
                                    data-dismiss="modal"
                                    aria-label="Close"
                                  >
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>

                                <div
                                  class="modal-body"
                                  style="
                                    color: #000000;
                                    font-family: Roboto, sans-serif;
                                    font-size: 8px;
                                    text-align: center;
                                  "
                                >
                                  <h4 style="font-family: Roboto, sans-serif">
                                    Are you sure you want to delete this Bill?
                                    This process cannot be UNDONE.
                                  </h4>
                                  <form
                                    action="/bills/delete/<%=row._id%>"
                                    method="POST"
                                  >
                                    <button
                                      type="submit"
                                      class="btn btn-secondary"
                                      style="
                                        background-color: #cc1818;
                                        width: 90px;
                                        border: none;
                                        border-radius: 10px;
                                        margin-right: 10px;
                                        margin-top: 20px;
                                      "
                                    >
                                      Delete
                                    </button>
                                    <button
                                      type="button"
                                      data-dismiss="modal"
                                      class="btn btn-primary"
                                      style="
                                        background-color: #32b9ff;
                                        border: none;
                                        border-radius: 10px;
                                        width: 90px;
                                        margin-left: 10px;
                                        margin-top: 20px;
                                      "
                                    >
                                      Cancel
                                    </button>
                                  </form>
                                </div>
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <% }) %>
                    </tbody>
                  </table>
                  <% } else { %>
                  <h1 class="text-center text-secondary mt-5">
                    No bills found in the Database!
                  </h1>
                  <% } %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <%- include('partials/afooter') -%>
    </div>
  </div>
</body>

