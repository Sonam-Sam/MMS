<%- include('partials/aheader') -%>
<!-- For Page Loader -->
<div id="preloader"></div>

<body id="page-top">
  <div id="wrapper">
    <%- include('partials/sidebar') -%>
    <div class="d-flex flex-column" id="content-wrapper">
      <div id="content">
        <nav
          class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top"
        >
          <%- include('partials/profiledrop') -%>
        </nav>
        <div class="container-fluid" style="margin-bottom: 40px">
          <!-- User List -->
          <div
            class="d-sm-flex justify-content-between align-items-center mb-4"
          >
            <h3
              class="text-dark mb-4"
              style="
                font-family: Roboto, sans-serif;
                margin-left: 22px;
                margin-top: 25px;
                font-weight: bold;
              "
            >
              List of MESS COMMITTEE
            </h3>
          </div>

          <div class="container-fluid">
            <div class="card shadow">
              <div class="card-body">
                <div
                  class="table-responsive table mt-2"
                  id="dataTable"
                  role="grid"
                  aria-describedby="dataTable_info"
                >
                  <%- include('partials/messages') -%> <% if(users != '') { %>
                  <table class="table dataTable my-0" id="dataTable">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Role</th>
                        <th>Gender</th>
                        <th>Contact</th>
                        <th>Action</th>
                      </tr>
                    </thead>

                    <tbody>
                      <% users.forEach((user, index) => { %>
                      <tr>
                        <td><%= user.name %></td>
                        <td><%= user.email %></td>
                        <td><%= user.role %></td>
                        <td><%= user.gender %></td>
                        <td><%= user.contact %></td>
                        <td>
                          <!-- Modal -->

                          <a
                            href="#"
                            class="btn btn-danger btn-sm"
                            data-toggle="modal"
                            data-target="#deleteusers<%= index %>"
                            style="
                              width: 24px;
                              height: 24px;
                              font-size: 11px;
                              padding-right: 17px;
                              padding-top: 6px;
                            "
                            ><i class="fas fa-trash-alt"></i
                          ></a>

                          <div
                            class="modal fade"
                            id="deleteusers<%= index %>"
                            tabindex="-1"
                            role="dialog"
                            aria-labelledby="exampleModalLabel"
                            aria-hidden="true"
                          >
                            <div class="modal-dialog" role="document">
                              <div
                                class="modal-content"
                                style="border-radius: 15px; margin-top: 190px"
                              >
                                <div class="modal-header">
                                  <i
                                    class="fas fa-trash-alt"
                                    style="
                                      color: #000000;
                                      font-size: 60px;
                                      margin-left: 205px;
                                      margin-top: 20px;
                                    "
                                  ></i>
                                  <button
                                    type="button"
                                    class="close"
                                    data-dismiss="modal"
                                    aria-label="Close"
                                  >
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>

                                <div
                                  class="modal-body"
                                  style="
                                    color: #000000;
                                    font-family: Roboto, sans-serif;
                                    font-size: 8px;
                                    text-align: center;
                                  "
                                >
                                  <h4 style="font-family: Roboto, sans-serif">
                                    Are you sure you want to delete this USER?
                                    This process cannot be UNDONE.
                                  </h4>
                                  <form
                                    action="/delete_user/<%=user._id%>"
                                    method="POST"
                                  >
                                    <button
                                      type="submit"
                                      class="btn btn-secondary"
                                      style="
                                        background-color: #cc1818;
                                        width: 90px;
                                        border: none;
                                        border-radius: 10px;
                                        margin-right: 10px;
                                        margin-top: 20px;
                                      "
                                    >
                                      Delete
                                    </button>
                                    <button
                                      type="button"
                                      data-dismiss="modal"
                                      class="btn btn-primary"
                                      style="
                                        background-color: #32b9ff;
                                        border: none;
                                        border-radius: 10px;
                                        width: 90px;
                                        margin-left: 10px;
                                        margin-top: 20px;
                                      "
                                    >
                                      Cancel
                                    </button>
                                  </form>
                                </div>
                              </div>
                            </div>
                          </div>

                          <!-- End Modal -->
                        </td>
                      </tr>
                      <% }) %>
                    </tbody>
                  </table>
                  <% } else { %>
                  <h1 class="text-center text-secondary mt-5">
                    No Users found in the Database!
                  </h1>
                  <% } %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <%- include('partials/afooter') -%>

    </div>
  </div>
</body>

